import 'package:flutter/material.dart';

class LocalizationService extends ChangeNotifier {
  // supports 'en' (default), 'mr' (Marathi), 'hi' (Hindi)
  String _locale = 'en';

  String get locale => _locale;

  void setLocale(String code) {
    if (_locale == code) return;
    _locale = code;
    notifyListeners();
  }

  void toggleToHindi() => setLocale(_locale == 'hi' ? 'en' : 'hi');

  String translate(String key) {
    final map = _localizedValues[key];
    if (map == null) return key;
    return map[_locale] ?? map['en'] ?? key;
  }

  // Minimal dictionary with English, Marathi, and Hindi entries
  final Map<String, Map<String, String>> _localizedValues = {
    'app_title': {
      'en': 'PikVedh',
      'mr': 'рдкрд┐рдХрд╡реЗрдз (PikVedh)',
      'hi': 'рдкрд┐рдХрд╡реЗрдз (PikVedh)'
    },
    'scan_pest': {'en': 'Scan Pest', 'mr': 'рдХреАрдб рд╕реНрдХреЕрди рдХрд░рд╛', 'hi': 'рдХреАрдЯ рд╕реНрдХреИрди рдХрд░реЗрдВ'},
    'dosage_calc': {'en': 'Dosage Calculator', 'mr': 'рдЦрдд рдХреЕрд▓реНрдХреНрдпреБрд▓реЗрдЯрд░', 'hi': 'рдЦреБрд░рд╛рдХ рдЧрдгрдХ'},
    'weather': {'en': 'Weather', 'mr': 'рд╣рд╡рд╛рдорд╛рди', 'hi': 'рдореМрд╕рдо'},
    'timeline': {'en': 'Crop Status', 'mr': 'рдкрд┐рдХрд╛рдЪреА рд╕реНрдерд┐рддреА', 'hi': 'рдлрд╕рд▓ рдХреА рд╕реНрдерд┐рддрд┐'},
    'stage_flowering': {'en': 'Flowering', 'mr': 'рдлреБрд▓реЛрд░рд╛', 'hi': 'рдлреВрд▓рдирд╛'},
    'stage_vegetative': {'en': 'Vegetative', 'mr': 'рд╢рд╛рдХреАрдп рд╡рд╛рдв', 'hi': 'рд╡рдирд╕реНрдкрддрд┐ рдЪрд░рдг'},
    'warning': {'en': 'Warning', 'mr': 'рд╕рд╛рд╡рдзрд╛рди', 'hi': 'рдЪреЗрддрд╛рд╡рдиреА'},
    'humidity': {'en': 'Humidity', 'mr': 'рдЖрджреНрд░рддрд╛', 'hi': 'рдирдореА'},
    'view_map': {'en': 'View Nearby Outbreaks', 'mr': 'рдЬрд╡рд│рдкрд╛рд╕рдЪрд╛ рдкреНрд░рд╛рджреБрд░реНрднрд╛рд╡ рдкрд╣рд╛', 'hi': 'рдкрд╛рд╕ рдХреА рдорд╣рд╛рдорд╛рд░реА рджреЗрдЦреЗрдВ'},
    'gps_wait': {'en': 'Waiting for GPS...', 'mr': 'GPS рдЪреА рд╡рд╛рдЯ рдкрд╣рд╛рдд рдЖрд╣реЗ...', 'hi': 'GPS рдХрд╛ рдЗрдВрддрдЬрд╛рд░...' },
    'location_denied': {'en': 'Location Denied', 'mr': 'рд╕реНрдерд╛рди рдкрд░рд╡рд╛рдирдЧреА рдирд╛рдХрд╛рд░рд▓реА', 'hi': 'рд╕реНрдерд╛рди рдЕрдиреБрдорддрд┐ рдЕрд╕реНрд╡реАрдХреГрдд'},
    'quick_actions': {'en': 'Quick Actions', 'mr': 'рдЬрд▓рдж рдХреНрд░рд┐рдпрд╛', 'hi': 'рддреНрд╡рд░рд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ'},
    'previous_scans': {'en': 'Previous Scans', 'mr': 'рдорд╛рдЧреАрд▓ рд╕реНрдХреЕрдиреНрд╕', 'hi': 'рдкрд┐рдЫрд▓реЗ рд╕реНрдХреИрди'},
    'profile': {'en': 'Profile', 'mr': 'рдкреНрд░реЛрдлрд╛рдЗрд▓', 'hi': 'рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓'},
    'harvest_confirm_title': {'en': 'Harvest Crop?', 'mr': 'рдХрд╛рдврдгреА рдХрд░рд╛рдпрдЪреА?', 'hi': 'рдлрд╕рд▓ рдХрдЯрд╛рдИ?'},
    'harvest_confirm_content': {
      'en': 'This will end the current season and clear all data. Are you ready?',
      'mr': 'рд╣реЗ рдЪрд╛рд▓реВ рд╣рдВрдЧрд╛рдо рд╕рдорд╛рдкреНрдд рдХрд░реЗрд▓ рдЖрдгрд┐ рд╕рд░реНрд╡ рдбреЗрдЯрд╛ рд╕рд╛рдл рдХрд░реЗрд▓. рддрдпрд╛рд░ рдЖрд╣рд╛рдд рдХрд╛?',
      'hi': 'рдпрд╣ рд╡рд░реНрддрдорд╛рди рдореМрд╕рдо рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрдЧрд╛ рдФрд░ рд╕рднреА рдбреЗрдЯрд╛ рд╕рд╛рдл рдХрд░реЗрдЧрд╛ред рдХреНрдпрд╛ рдЖрдк рддреИрдпрд╛рд░ рд╣реИрдВ?'
    },
    'cancel': {'en': 'Cancel', 'mr': 'рд░рджреНрдж рдХрд░рд╛', 'hi': 'рд░рджреНрдж рдХрд░реЗрдВ'},
    'yes_harvest': {'en': 'Yes, Harvest', 'mr': 'рд╣реЛрдп, рдХрд╛рдврдгреА', 'hi': 'рд╣рд╛рдБ, рдХрдЯрд╛рдИ рдХрд░реЗрдВ'},
    'quick_scan': {'en': 'Quick Scan', 'mr': 'рддреНрд╡рд░рд┐рдд рд╕реНрдХреЕрди', 'hi': 'рддреНрд╡рд░рд┐рдд рд╕реНрдХреИрди'},
    'Seedling': {'en': 'Seedling', 'mr': 'рдЕрдВрдХреБрд░ (Seedling)', 'hi': 'рдЕрдВрдХреБрд░'},
    'Vegetative': {'en': 'Vegetative', 'mr': 'рд╢рд╛рдХреАрдп рд╡рд╛рдв (Vegetative)', 'hi': 'рд╡рдирд╕реНрдкрддрд┐'},
    'Flowering': {'en': 'Flowering', 'mr': 'рдлреБрд▓реЛрд░рд╛ (Flowering)', 'hi': 'рдлреВрд▓рдирд╛'},
    'Harvest': {'en': 'Harvest', 'mr': 'рдХрд╛рдврдгреА (Harvest)', 'hi': 'рдХрдЯрд╛рдИ'},
    // PEST NAMES (simple Hindi transliterations)
    'Pink Bollworm': {'en': 'Pink Bollworm', 'mr': 'рд╢реЗрдВрджрд░реА рдмреЛрдВрдбрдЕрд│реА', 'hi': 'рдкрд┐рдВрдХ рдмреЙрд▓рд╡рд░реНрдо'},
    'Aphids': {'en': 'Aphids', 'mr': 'рдорд╛рд╡рд╛ (Aphids)', 'hi': 'рдПрдлрд┐рдб'},
    'Thrips': {'en': 'Thrips', 'mr': 'рдлреБрд▓рдХрд┐рдбреЗ (Thrips)', 'hi': 'рдереНрд░рд┐рдкреНрд╕'},
    'Stem Fly': {'en': 'Stem Fly', 'mr': 'рдЦреЛрдбрдорд╛рд╢реА', 'hi': 'рд╕реНрдЯреЗрдо рдлреНрд▓рд╛рдИ'},
    'Leaf Miner': {'en': 'Leaf Miner', 'mr': 'рдкрд╛рдиреЗ рдкреЛрдЦрд░рдгрд╛рд░реА рдЕрд│реА', 'hi': 'рд▓реАрдл рдорд╛рдЗрдирд░'},
    'Rust': {'en': 'Rust', 'mr': 'рддрд╛рдВрдмреЗрд░рд╛', 'hi': 'рд░рд╕реНрдЯ'},
    'Fall Armyworm': {'en': 'Fall Armyworm', 'mr': 'рд▓рд╖реНрдХрд░реА рдЕрд│реА', 'hi': 'рдлреЙрд▓ рдЖрд░реНрдореАрд╡рд░реНрдо'},
    'Whitefly': {'en': 'Whitefly', 'mr': 'рдкрд╛рдВрдврд░реА рдорд╛рд╢реА', 'hi': 'рд╡реНрд╣рд╛рдЗрдЯрдлреНрд▓рд╛рдп'},
    // Pest scanner UI
    'pest_scanner_title': {'en': 'Pest Scanner', 'mr': 'рдХреАрдб рд╕реНрдХреЕрдирд░', 'hi': 'рдХреАрдЯ рд╕реНрдХреИрдирд░'},
    'simulate_detection': {'en': 'Simulate Pest Detection', 'mr': 'рдХреАрдб рд╢реЛрдзрдгреНрдпрд╛рдЪреЗ рдЕрдиреБрдХрд░рдг рдХрд░рд╛', 'hi': 'рдХреАрдЯ рдкрд╣рдЪрд╛рди рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВ'},
    'confidence': {'en': 'Confidence', 'mr': 'рд╡рд┐рд╢реНрд╡рд╛рд╕', 'hi': 'рд╡рд┐рд╢реНрд╡рд╛рд╕'},
    'solution': {'en': 'Solution', 'mr': 'рдЙрдкрд╛рдп', 'hi': 'рд╕рдорд╛рдзрд╛рди'},
    'save_to_ledger': {'en': 'Save to Ledger', 'mr': 'рд▓рдЬрд░ рдордзреНрдпреЗ рдЬрддрди рдХрд░рд╛', 'hi': 'рд▓реЗрдЬрд░ рдореЗрдВ рд╕рд╣реЗрдЬреЗрдВ'},
    'saved_to_ledger': {'en': 'Saved to ledger', 'mr': 'рд▓рдЬрд░ рдордзреНрдпреЗ рдЬрддрди рдЭрд╛рд▓реЗ', 'hi': 'рд▓реЗрдЬрд░ рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛'},
    'unknown': {'en': 'Unknown', 'mr': 'рдЕрдЬреНрдЮрд╛рдд', 'hi': 'рдЕрдЬреНрдЮрд╛рдд'},
    // Seed scan / onboarding
    'seed_scan_title': {'en': 'Seed Scan', 'mr': 'рдмрд┐рдпрд╛рдгреЗ рд╕реНрдХреЕрди', 'hi': 'рдмреАрдЬ рд╕реНрдХреИрди'},
    'confirm_crop_details': {'en': 'Confirm Crop Details', 'mr': 'рдкрд┐рдХ рддрдкрд╢реАрд▓ рдкреБрд╖реНрдЯрд┐ рдХрд░рд╛', 'hi': 'рдлрд╕рд▓ рд╡рд┐рд╡рд░рдг рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ'},
    'detected': {'en': 'Detected', 'mr': 'рд╕рд╛рдкрдбрд▓реЗ', 'hi': 'рдкрд╣рдЪрд╛рдирд╛ рдЧрдпрд╛'},
    'seed_variety_hybrid': {'en': 'Seed Variety: Hybrid (Auto-Detected)', 'mr': 'рдмрд┐рдпрд╛рдгреНрдпрд╛рдЪреА рдкреНрд░рдХрд╛рд░: рд╣рд╛рдпрдмреНрд░рд┐рдб (рд╕реНрд╡рддрдГ рдУрд│рдЦрд▓реЗ)', 'hi': 'рдмреАрдЬ рдХрд┐рд╕реНрдо: рд╣рд╛рдЗрдмреНрд░рд┐рдб (рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкрд╣рдЪрд╛рдирд╛)'},
    'sowing_date': {'en': 'Sowing Date (Lagwad):', 'mr': 'рдкреЗрд░рдгреА рддрд╛рд░реАрдЦ (рд▓рдЧрд╡рдб):', 'hi': 'рдмреБрдЖрдИ рдХреА рддрд╛рд░реАрдЦ (рд▓рд╛рдЧрд╡рдб):'},
    'retake_photo': {'en': 'Retake Photo', 'mr': 'рдкрд░рдд рдлреЛрдЯреЛ рдШреНрдпрд╛', 'hi': 'рдлрд┐рд░ рд╕реЗ рдлреЛрдЯреЛ рд▓реЗрдВ'},
    'confirm_and_start': {'en': 'Confirm & Start', 'mr': 'рдкреБрд╖реНрдЯреА рдХрд░рд╛ рдЖрдгрд┐ рд╕реБрд░реВ рдХрд░рд╛', 'hi': 'рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ рдФрд░ рд╢реБрд░реВ рдХрд░реЗрдВ'},
    'processing': {'en': 'Processing...', 'mr': 'рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЪрд╛рд▓реВ рдЖрд╣реЗ...', 'hi': 'рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╣реЛ рд░рд╣рд╛ рд╣реИ...'},
    'capture_seed_packet': {'en': 'Capture Seed Packet', 'mr': 'рдмрд┐рдпрд╛рдгреЗ рдкреЕрдХреЗрдЯ рдШреНрдпрд╛', 'hi': 'рдмреАрдЬ рдкреИрдХреЗрдЯ рдХреИрдкреНрдЪрд░ рдХрд░реЗрдВ'},
    'skip_onboarding': {'en': 'Skip onboarding', 'mr': 'рдСрдирдмреЛрд░реНрдбрд┐рдВрдЧ рд╡рдЧрд│рд╛', 'hi': 'рдСрдирдмреЛрд░реНрдбрд┐рдВрдЧ рдЫреЛрдбрд╝реЗрдВ'},
    'we_guessed': {'en': 'ЁЯТб We guessed this date based on the {crop} season. Tap to change if incorrect.', 'mr': 'ЁЯТб рдЖрдореНрд╣реА рд╣рд╛ рджрд┐рдирд╛рдВрдХ {crop} рд╣рдВрдЧрд╛рдорд╛рд╡рд░реВрди рдЧреГрд╣реАрдд рдзрд░рд▓рд╛ рдЖрд╣реЗ. рдЪреБрдХрд╛ рдЕрд╕рд▓реНрдпрд╛рд╕ рдЯреЕрдк рдХрд░рд╛.', 'hi': 'ЁЯТб рд╣рдордиреЗ рдпрд╣ рддрд┐рдерд┐ {crop} рдореМрд╕рдо рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдИ рд╣реИред рдпрджрд┐ рдЧрд▓рдд рд╣реЛ рддреЛ рдЯреИрдк рдХрд░реЗрдВ.'},
    // Profile
    'farm_ledger': {'en': 'Farm Ledger', 'mr': 'рдлрд╛рд░реНрдо рд▓реЗрдЬрд░', 'hi': 'рдлрд╛рд░реНрдо рд▓реЗрдЬрд░'},
    'logout': {'en': 'Logout', 'mr': 'рдмрд╛рд╣реЗрд░ рдкрдбрд╛', 'hi': 'рд▓реЙрдЧрдЖрдЙрдЯ'},
    'farm_size': {'en': 'Farm Size', 'mr': 'рд╢реЗрддрд╛рдЪреЗ рдХреНрд╖реЗрддреНрд░', 'hi': 'рдЦреЗрдд рдХрд╛ рдЖрдХрд╛рд░'},
    // Dosage calculator
    'tank_size': {'en': 'Tank Size (Liters)', 'mr': 'рдЯрдБрдХ рдЖрдХрд╛рд░ (рд▓рд┐рдЯрд░)', 'hi': 'рдЯреИрдВрдХ рдЖрдХрд╛рд░ (рд▓реАрдЯрд░)'},
    'export_mode': {'en': 'Export Mode', 'mr': 'рдирд┐рд░реНрдпрд╛рдд рдореЛрдб', 'hi': 'рдирд┐рд░реНрдпрд╛рдд рдореЛрдб'},
    'select_medicine': {'en': 'Select Medicine', 'mr': 'рдФрд╖рдз рдирд┐рд╡рдбрд╛', 'hi': 'рджрд╡рд╛рдИ рдЪреБрдиреЗрдВ'},
    'required_dosage': {'en': 'Required Dosage', 'mr': 'рдЖрд╡рд╢реНрдпрдХ рдорд╛рддреНрд░рд╛', 'hi': 'рдЖрд╡рд╢реНрдпрдХ рдЦреБрд░рд╛рдХ'},
    'caps': {'en': 'Caps', 'mr': 'рдХреЕрдкреНрд╕', 'hi': 'рдХреИрдкреНрд╕'},
    'banned_for_export': {'en': '{name} is banned for export.', 'mr': '{name} рдирд┐рд░реНрдпрд╛рддреАрд╕рд╛рдареА рдмрдВрдж рдЖрд╣реЗ.', 'hi': '{name} рдирд┐рд░реНрдпрд╛рдд рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рд╣реИ.'},
    'pest_label': {'en': 'Pest', 'mr': 'рдХреАрдб', 'hi': 'рдХреАрдЯ'},
    // Map screen
    'pest_radar': {'en': 'Pest Radar', 'mr': 'рдХреАрдЯрдХ рд░рд╛рдбрд╛рд░', 'hi': 'рдХреАрдЯ рд░реЗрдбрд╛рд░'},
    'showing_risks_for': {'en': 'Showing risks for {crop}', 'mr': '{crop} рд╕рд╛рдареА рдЬреЛрдЦреАрдо рджрд╛рдЦрд╡рдд рдЖрд╣реЗ', 'hi': '{crop} рдХреЗ рд▓рд┐рдП рдЦрддрд░реЗ рджрд┐рдЦрд╛ рд░рд╣рд╛ рд╣реИ'},
    'you': {'en': 'You', 'mr': 'рддреБрдо', 'hi': 'рдЖрдк'},
    // TFLite / telemetry messages
    'tflite_missing': {'en': 'TFLite model missing тАФ some features disabled.', 'mr': 'TFLite рдореЙрдбреЗрд▓ рдЧрд╛рдпрдм - рдХрд╛рд╣реА рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ рдЕрдХреНрд╖рдо.', 'hi': 'TFLite рдореЙрдбрд▓ рдЧрд╛рдпрдм тАФ рдХреБрдЫ рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдЕрдХреНрд╖рдо рд╣реИрдВ.'},
    // Register screen
    'register': {'en': 'Register', 'mr': 'рдиреЛрдВрджрдгреА', 'hi': 'рд░рдЬрд┐рд╕реНрдЯрд░'},
    'name': {'en': 'Name', 'mr': 'рдирд╛рд╡', 'hi': 'рдирд╛рдо'},
    'phone_number': {'en': 'Phone Number', 'mr': 'рдлреЛрди рдирдВрдмрд░', 'hi': 'рдлреЛрди рдирдВрдмрд░'},
    'otp': {'en': 'OTP', 'mr': 'рдУрдЯреАрдкреА', 'hi': 'рдУрдЯреАрдкреА'},
    'send_otp': {'en': 'Send OTP', 'mr': 'рдУрдЯреАрдкреА рдкрд╛рдард╡рд╛', 'hi': 'рдУрдЯреАрдкреА рднреЗрдЬреЗрдВ'},
    // Dosage helper messages
    'enter_valid_values': {'en': 'Enter valid values', 'mr': 'рд╡реИрдз рдореВрд▓реНрдп рдЯрд╛рдХрд╛', 'hi': 'рдорд╛рдиреНрдп рдорд╛рди рджрд░реНрдЬ рдХрд░реЗрдВ'},
    'enter_valid_number': {'en': 'Enter a valid number', 'mr': 'рд╡реИрдз рд╕рдВрдЦреНрдпрд╛ рдЯрд╛рдХрд╛', 'hi': 'рдорд╛рдиреНрдп рд╕рдВрдЦреНрдпрд╛ рджрд░реНрдЬ рдХрд░реЗрдВ'},
    'enter_tank_size_to_calculate': {'en': 'Enter tank size to calculate dosage', 'mr': 'рдЦреБрд░рд╛рдХ рдЧрдгрдирд╛ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЯрдБрдХ рдЖрдХрд╛рд░ рдкреНрд░рд╡рд┐рд╖реНрдЯ рдХрд░рд╛', 'hi': 'рдЦреБрд░рд╛рдХ рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯреИрдВрдХ рдЖрдХрд╛рд░ рджрд░реНрдЬ рдХрд░реЗрдВ'},
    'add_ml_caps': {'en': 'Add {ml} ml (approx {caps} caps)', 'mr': '{ml} рдорд┐.рд▓реА. рдЬреЛрдбрд╛ (рд╕реБрдорд╛рд░реЗ {caps} рдХреЕрдкреНрд╕)', 'hi': '{ml} рдорд┐.рд▓реА. рдЬреЛрдбрд╝реЗрдВ (рд▓рдЧрднрдЧ {caps} рдХреИрдкреНрд╕)'},
  };
}
